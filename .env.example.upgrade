# Stripe Upgrade Flow Environment Variables
# Add these to your existing .env file

# === STRIPE CONFIGURATION ===
# Required for payment processing

# Stripe Secret Key (starts with sk_)
# Get from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=sk_test_...

# Stripe Publishable Key (starts with pk_)
# Get from: https://dashboard.stripe.com/apikeys
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Stripe Webhook Secret (starts with whsec_)
# Get from: https://dashboard.stripe.com/webhooks
# After creating webhook endpoint for: /api/stripe/webhook
STRIPE_WEBHOOK_SECRET=whsec_...

# === STRIPE PRICE IDS ===
# Create products and prices in Stripe Dashboard
# Get from: https://dashboard.stripe.com/products

# Pro Plan Price ID (monthly subscription)
# Example: price_1AbCdEfGhIjKlMnOpQrStUvW
NEXT_PUBLIC_STRIPE_PRO_PRICE_ID=price_...

# Enterprise Plan Price ID (monthly subscription)
# Example: price_2XyZaBcDeFgHiJkLmNoPqRsT
NEXT_PUBLIC_STRIPE_ENTERPRISE_PRICE_ID=price_...

# === OPTIONAL: STRIPE PORTAL CONFIGURATION ===
# Configure at: https://dashboard.stripe.com/settings/billing/portal

# === FEATURE FLAGS ===
# Control new features rollout

# Enable new usage guard middleware (default: false)
# Set to 'true' to activate enhanced usage tracking
ENABLE_NEW_USAGE_GUARD=false

# === APPLICATION URLs ===
# Already in your .env, verify these are correct

# Your application's public URL (no trailing slash)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# === WEBHOOK ENDPOINTS TO CONFIGURE IN STRIPE ===
# 1. Go to https://dashboard.stripe.com/webhooks
# 2. Add endpoint: https://your-domain.com/api/stripe/webhook
# 3. Select events:
#    - checkout.session.completed
#    - customer.subscription.created
#    - customer.subscription.updated
#    - customer.subscription.deleted
#    - invoice.payment_succeeded
#    - invoice.payment_failed
# 4. Copy the signing secret to STRIPE_WEBHOOK_SECRET

# === TESTING WITH STRIPE CLI ===
# For local development, use Stripe CLI to forward webhooks:
# 
# 1. Install Stripe CLI: https://stripe.com/docs/stripe-cli
# 2. Login: stripe login
# 3. Forward webhooks: stripe listen --forward-to localhost:3000/api/stripe/webhook
# 4. Use the webhook secret from the CLI output

# === TEST CARDS ===
# Use these for testing in Stripe test mode:
# 
# Success: 4242 4242 4242 4242
# Decline: 4000 0000 0000 0002
# 3D Secure: 4000 0027 6000 3184
# 
# Any future expiry date and any 3-digit CVC